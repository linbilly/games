:root{
  --bg1:#aee9ff;
  --bg2:#f7fcff;
  --ink:#17324a;
  --panel:#ffffffee;
  --shadow: 0 10px 30px rgba(0,0,0,.18);
  --shadow2: 0 6px 18px rgba(0,0,0,.15);
  --primary:#2d7dff;
  --danger:#ff3b30;
}
*{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
html,body{margin:0;height:100%;background:linear-gradient(180deg,var(--bg1),var(--bg2));color:var(--ink)}
#app{position:relative;width:100%;height:100%;overflow:hidden}
canvas{width:100%;height:100%;display:block;touch-action:none}

.hud{position:absolute;inset:0;pointer-events:none;padding:env(safe-area-inset-top) 14px 14px 14px}
.hudBtn{pointer-events:auto;position:absolute;top:max(env(safe-area-inset-top),10px);left:10px;width:48px;height:48px;border:none;border-radius:14px;background:#ffffffcc;box-shadow:var(--shadow2);font-size:22px}
.hudRow{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-top:6px}
.pill{background:#ffffffcc;border-radius:999px;padding:8px 12px;box-shadow:var(--shadow2);font-weight:800;font-size:14px}
.prompt{margin-top:10px;text-align:center;font-weight:1000;font-size:clamp(20px,3.2vw,34px);text-shadow:0 2px 0 rgba(255,255,255,.6)}
.subprompt{text-align:center;font-weight:750;font-size:clamp(14px,2.2vw,22px);opacity:.85;margin-top:2px}
.counter{position:absolute;right:10px;top:max(env(safe-area-inset-top),10px);background:#ffffffcc;box-shadow:var(--shadow2);border-radius:18px;padding:10px 12px;min-width:150px;text-align:center}
.counterLabel{font-weight:1000;font-size:14px}
.counterValue{font-weight:1000;font-size:34px;line-height:1}
.counterMini{font-weight:1000;font-size:16px;opacity:.9}

.overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.25);padding:18px}
.hidden{display:none!important}
.panel{width:min(720px,96vw);border-radius:22px;background:var(--panel);box-shadow:var(--shadow);padding:18px 18px 14px 18px;backdrop-filter:blur(6px)}
.title{font-size:30px;font-weight:1000;text-align:center;margin-bottom:10px}
.section{margin:12px 0}
.sectionTitle{font-weight:1000;margin-bottom:8px;opacity:.95}
.grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
@media(min-width:640px){.grid{grid-template-columns:repeat(3,minmax(0,1fr))}}
.modeBtn{border:none;border-radius:16px;padding:12px;background:#ffffffd9;box-shadow:var(--shadow2);cursor:pointer;text-align:left}
.modeBtn .mTitle{font-weight:1000;font-size:16px;margin-bottom:4px}
.modeBtn .mDesc{font-weight:650;opacity:.8;font-size:13px;line-height:1.2}
.modeBtn.selected{outline:4px solid rgba(45,125,255,.45)}

.row{display:flex;justify-content:center;align-items:center;gap:12px;flex-wrap:wrap}
.row.gap{gap:10px;margin-top:10px}
button.primary,button.secondary,button.danger{border:none;border-radius:16px;padding:12px 16px;font-weight:1000;cursor:pointer;box-shadow:var(--shadow2);min-width:120px}
button.primary{background:var(--primary);color:#fff}
button.secondary{background:#ffffffd9;color:var(--ink)}
button.danger{background:var(--danger);color:#fff}
.toggle{display:flex;align-items:center;gap:8px;font-weight:850;background:#ffffffd9;border-radius:999px;padding:8px 12px;box-shadow:var(--shadow2)}
.tiny{font-size:12px;opacity:.75;margin-top:10px;text-align:center}

.modalBody{background:#ffffffd9;border-radius:16px;padding:12px;box-shadow:var(--shadow2);max-height:55vh;overflow:auto;font-weight:750;line-height:1.35}

.banner{position:absolute;left:50%;top:22%;transform:translate(-50%,-50%);background:#ffffffee;border-radius:999px;padding:10px 18px;font-weight:1000;font-size:34px;box-shadow:var(--shadow);animation:pop 900ms ease both}
@keyframes pop{
  0%{transform:translate(-50%,-50%) scale(.7);opacity:0}
  20%{transform:translate(-50%,-50%) scale(1.05);opacity:1}
  80%{transform:translate(-50%,-50%) scale(1);opacity:1}
  100%{transform:translate(-50%,-50%) scale(.95);opacity:0}
}
