<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Math Ninja</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div id="app">
    <header class="topbar">
      <div class="brand">
        <div class="logo">ü•∑</div>
        <div>
          <div class="title">Math Ninja</div>
          <div class="subtitle">Fact Fluency + Grade 3 Progression</div>
        </div>
      </div>

      <div class="hud" id="hud" aria-live="polite">
        <div class="hudItem"><span class="label">Mode</span><span id="hudMode" class="value">‚Äî</span></div>
        <div class="hudItem"><span class="label">Score</span><span id="hudScore" class="value">0</span></div>
        <div class="hudItem"><span class="label">Streak</span><span id="hudStreak" class="value">0</span></div>
        <div class="hudItem"><span class="label">Hearts</span><span id="hudHearts" class="value">‚ù§‚ù§‚ù§</span></div>
      </div>

      <div class="progressWrap" aria-label="Progress">
        <div class="progressTop">
          <span id="progressLabel">Progress</span>
          <span id="progressPct">0%</span>
        </div>
        <div class="progressTrack"><div id="progressBar" class="progressBar"></div></div>
      </div>

      <button id="btnPause" class="ghostBtn" title="Pause/Resume">‚è∏</button>
      <button id="btnMenu" class="ghostBtn" title="Menu">‚ò∞</button>
    </header>

    <main class="stageWrap">
      <canvas id="stage" width="960" height="540" aria-label="Game stage"></canvas>

      <section class="panel" id="panel">
        <div class="questionRow">
          <div class="qLabel">Solve:</div>
          <div class="question" id="question">‚Äî</div>
          <div class="timerPill" id="timerPill"><span id="timerText">‚Äî</span></div>
        </div>

        <div class="choices" id="choices" role="group" aria-label="Answer choices"></div>
        <div class="hint" id="hint" aria-live="polite"></div>
      </section>

      <section class="overlay" id="overlay" aria-hidden="false">
        <div class="card">
          <h1>ü•∑ Math Ninja</h1>
          <p class="lead">Answer correctly to defeat the enemy. Level up every <strong>10 correct</strong> ‚Äî hearts refill!</p>

          <div class="modeGrid" id="modeGrid">
            <button class="modeBtn" data-mode="add10">
              <div class="modeName">Add ‚â§ 10</div>
              <div class="modeDesc">Warm-up</div>
            </button>
            <button class="modeBtn" data-mode="add20">
              <div class="modeName">Add ‚â§ 20</div>
              <div class="modeDesc">Make-10</div>
            </button>
            <button class="modeBtn" data-mode="sub20">
              <div class="modeName">Subtract ‚â§ 20</div>
              <div class="modeDesc">Count-up</div>
            </button>
            <button class="modeBtn" data-mode="mixed">
              <div class="modeName">Mixed ‚â§ 20</div>
              <div class="modeDesc">Combo arena</div>
            </button>
          </div>

          <div class="row">
            <label class="toggle">
              <input type="checkbox" id="chkSound" checked />
              <span>Sound FX</span>
            </label>
            <label class="toggle">
              <input type="checkbox" id="chkHints" checked />
              <span>Hints</span>
            </label>
            <label class="toggle">
              <input type="checkbox" id="chkAdaptive" checked />
              <span>Adaptive</span>
            </label>
          </div>

          <div class="row">
            <label class="selectWrap">
              <span class="selectLabel">Speed</span>
              <select id="selSpeed" class="select">
                <option value="turtle">üê¢ Turtle (20%)</option>
                <option value="slow">üï∞Ô∏è Slow (60%)</option>
                <option value="normal" selected>‚ö° Normal (100%)</option>
                <option value="falcon">ü¶Ö Falcon (200%)</option>
              </select>
            </label>
          </div>

          <div class="row">
            <button id="btnStart" class="primaryBtn">Start</button>
            <button id="btnHow" class="ghostBtn">How to play</button>
            <button id="btnReset" class="dangerBtn">Reset progress</button>
            <button id="btnQuit" class="ghostBtn">Quit</button>
          </div>

          <div class="smallPrint" id="progressLine">Progress: ‚Äî</div>
        </div>


        <div class="modal" id="levelUpModal" aria-hidden="true">
          <div class="modalCard">
            <h2 id="levelUpTitle">Next challenge unlocked!</h2>
            <p id="levelUpText" class="lead" style="margin-top:6px;">‚Äî</p>
            <div class="row">
              <button id="btnContinue" class="primaryBtn">Continue</button>
              <button id="btnEndGame" class="dangerBtn">End game</button>
            </div>
          </div>
        </div>

        <div class="modal" id="howModal" aria-hidden="true">
          <div class="modalCard">
            <h2>How to play</h2>
            <ul>
              <li>Click an answer choice.</li>
              <li>Wrong answers cost 1 heart ‚Äî try again (wrong choice greys out).</li>
              <li>After a wrong answer, time slows (enemy slowdown aura shows).</li>
              <li>Every 10 correct answers: <strong>level up</strong> + hearts refill.</li>
            </ul>
            <div class="row">
              <button id="btnCloseHow" class="primaryBtn">Got it</button>
            </div>
          </div>
        </div>
      </section>

      <section class="toast" id="toast" aria-live="polite"></section>
    </main>

    <footer class="footer">
      <div>Keyboard: <kbd>1</kbd><kbd>2</kbd><kbd>3</kbd><kbd>4</kbd> selects choices ¬∑ <kbd>Esc</kbd> opens menu</div>
    </footer>
  </div>

  <script type="module" src="js/main.js"></script>
</body>
</html>
